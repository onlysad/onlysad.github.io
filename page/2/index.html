<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Victor Jones">


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="Victor’ Blog">
<meta property="og:url" content="https://veevv.com/page/2/index.html">
<meta property="og:site_name" content="Victor’ Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Victor’ Blog">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="Victor’ Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//lib.baomitu.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//lib.baomitu.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//lib.baomitu.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//lib.baomitu.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Victor’ Blog</title>

<script src="//lib.baomitu.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//lib.baomitu.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: false,
        fancybox_js: "//lib.baomitu.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//lib.baomitu.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    };
</script>





    <script>
        yiliaConfig.jquery_ui = [true, "//lib.baomitu.com/jqueryui/1.10.4/jquery-ui.min.js", "//lib.baomitu.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://en.gravatar.com/avatar/d8feb2f92e88467381204ad8ce70e97b?s=150" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Victor Jones</a></h1>
        </hgroup>

        
        <p class="header-subtitle">一只程序猿自说自话的地方</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=v@veevv.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax-parsererror/">$.ajax parsererror</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/406-Not-Acceptable/">406 Not Acceptable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ContextLoaderListener-启动报错/">ContextLoaderListener 启动报错</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK-安装/">JDK 安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Map泛型变了/">Map泛型变了</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Map泛型失效/">Map泛型失效</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC-406/">SpringMVC 406</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootstrap/">bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos-jdk安装/">centos jdk安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/col-xl/">col-xl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flowable-modeler/">flowable-modeler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gomybatis/">gomybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/j2ee/">j2ee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/j2ee-faq/">j2ee faq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-JDK安装/">linux JDK安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mapper-热加载/">mapper 热加载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memory-leak/">memory leak</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis-热加载/">mybatis 热加载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql5-8-zip安装/">mysql5.8 zip安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql5-8-解压版安装/">mysql5.8 解压版安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql5-8zip安装/">mysql5.8zip安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql5-8解压版安装/">mysql5.8解压版安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql启动失败/">mysql启动失败</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql自动备份/">mysql自动备份</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/schedulerFactory-Worker-1/">schedulerFactory_Worker-1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selinux/">selinux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-mvc-json-406/">spring mvc json 406</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat-启动报错/">tomcat 启动报错</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat-多项目-启动报错/">tomcat 多项目 启动报错</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat启动报错/">tomcat启动报错</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat多项目启动报错/">tomcat多项目启动报错</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/touch/">touch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/touch-js/">touch.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vsftp/">vsftp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum安装Mysql5-7/">yum安装Mysql5.7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/双十一/">双十一</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/双十一优惠券/">双十一优惠券</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/双十一优惠卷/">双十一优惠卷</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/布局/">布局</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开启启动/">开启启动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/栅格/">栅格</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编译tensorflow-On-Arm/">编译tensorflow On Arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动启动/">自动启动</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">一个低调而由专注的Java Coder, 7年+Java相关开发经验, 5年+项目及团队管理经验.</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Victor Jones</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="http://en.gravatar.com/avatar/d8feb2f92e88467381204ad8ce70e97b?s=150" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Victor Jones</a></h1>
            </hgroup>
            
            <p class="header-subtitle">一只程序猿自说自话的地方</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=v@veevv.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap">
  
    <article id="post-tomcat-start-error-contextloaderlistener" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/25/tomcat-start-error-contextloaderlistener/" class="article-date">
      <time datetime="2015-12-24T16:00:00.000Z" itemprop="datePublished">2015-12-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/25/tomcat-start-error-contextloaderlistener/">使用ContextLoaderListener监听tomcat启动时, tomcat启动报错.</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="啊啊啊啊啊啊啊啊啊啊啊啊啊-折腾一下午啊啊啊啊啊-好想扇死自己啊啊啊啊啊啊啊啊-尼玛好傻逼的错误啊啊啊啊啊啊啊啊啊啊"><a href="#啊啊啊啊啊啊啊啊啊啊啊啊啊-折腾一下午啊啊啊啊啊-好想扇死自己啊啊啊啊啊啊啊啊-尼玛好傻逼的错误啊啊啊啊啊啊啊啊啊啊" class="headerlink" title="啊啊啊啊啊啊啊啊啊啊啊啊啊, 折腾一下午啊啊啊啊啊, 好想扇死自己啊啊啊啊啊啊啊啊, 尼玛好傻逼的错误啊啊啊啊啊啊啊啊啊啊"></a>啊啊啊啊啊啊啊啊啊啊啊啊啊, 折腾一下午啊啊啊啊啊, 好想扇死自己啊啊啊啊啊啊啊啊, 尼玛好傻逼的错误啊啊啊啊啊啊啊啊啊啊</h3><p>下午项目上传服务器, 因为是第一次, 所以连同数据库都得上传. 另外还得安装tomcat和jdk.<br>一番折腾, 全部搞定, 启动.</p>
<h2 id="尼玛啊-这是神马啊"><a href="#尼玛啊-这是神马啊" class="headerlink" title="尼玛啊, 这是神马啊!!"></a>尼玛啊, 这是神马啊!!</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">25-Dec-2015 19:47:33.314 WARNING [localhost-startStop-2] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesJdbc The web application [crm] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.</span><br><span class="line">25-Dec-2015 19:47:33.332 WARNING [localhost-startStop-2] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web application [crm] appears to have started a thread named [schedulerFactory_Worker-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:</span><br><span class="line"> java.lang.Object.wait(Native Method)</span><br><span class="line"> org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:519)</span><br><span class="line">25-Dec-2015 19:47:33.339 WARNING [localhost-startStop-2] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web application [crm] appears to have started a thread named [schedulerFactory_Worker-2] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:</span><br><span class="line"> java.lang.Object.wait(Native Method)</span><br><span class="line"> org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:519)</span><br></pre></td></tr></table></figure>
<h2 id="tomcat启动就报错-完全启不起来-不对啊-尼玛本地一切正常啊-tomcat和jdk环境和本地一毛一样啊"><a href="#tomcat启动就报错-完全启不起来-不对啊-尼玛本地一切正常啊-tomcat和jdk环境和本地一毛一样啊" class="headerlink" title="tomcat启动就报错 完全启不起来, 不对啊, 尼玛本地一切正常啊, tomcat和jdk环境和本地一毛一样啊!!!!"></a>tomcat启动就报错 完全启不起来, 不对啊, 尼玛本地一切正常啊, tomcat和jdk环境和本地一毛一样啊!!!!</h2><p>于是开始一番长达一下午的折腾. T ^ T, 检查各项配置, 换tomcat, 换jdk, 尼玛明明都是从官网下的啊啊啊啊啊啊啊.</p>
<p>直到刚刚都还没解决. 之前尝试把ContextLoaderListener监听初始化缓存的代码注掉后, 确实启动起来, 所以尼玛肯定是这里问题.</p>
<p>可尼玛, 本地都是正常的啊啊啊啊, 没办法, 那就注掉吧, 试试其他的功能, 启动, 登陆, 嗯???????!!!!!!!!!!!!! 神马? 500? 无法访问数据库???  神马情况??</p>
<p>仔细一看, 数据库连接的ip地址是服务器的外网地址, 然后访问被拒绝. T ^ T, 一万头草泥马呼啸而过啊… 原来jdbc没改, 还是用的本地的, 数据库没有对服务器自己的外网地址做访问授权…</p>
<p>那之前的问题, 我擦擦擦擦擦啊, ContextLoaderListener监听初始化缓存是要读取数据库的啊啊啊啊啊啊, 卧槽, 原来是这样啊啊啊啊啊 T ^ T</p>
<p>遂改之, 启动, 哭死啊, 真的正常了啊啊啊. 坑死爹了啊, 这尼玛神马报错啊… 教训啊教训.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/咖啡人生/">咖啡人生</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ContextLoaderListener-启动报错/">ContextLoaderListener 启动报错</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/memory-leak/">memory leak</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/schedulerFactory-Worker-1/">schedulerFactory_Worker-1</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat-启动报错/">tomcat 启动报错</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-double-eleven-get-coupon" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/26/double-eleven-get-coupon/" class="article-date">
      <time datetime="2015-10-25T16:00:00.000Z" itemprop="datePublished">2015-10-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/26/double-eleven-get-coupon/">双十一优惠券 一次性全部领取</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="一次领光天猫双11所有优惠卷"><a href="#一次领光天猫双11所有优惠卷" class="headerlink" title="一次领光天猫双11所有优惠卷"></a>一次领光天猫双11所有优惠卷</h2><h2 id="一次领光天猫双11所有优惠卷-1"><a href="#一次领光天猫双11所有优惠卷-1" class="headerlink" title="一次领光天猫双11所有优惠卷"></a>一次领光天猫双11所有优惠卷</h2><h2 id="一次领光天猫双11所有优惠卷-2"><a href="#一次领光天猫双11所有优惠卷-2" class="headerlink" title="一次领光天猫双11所有优惠卷"></a>一次领光天猫双11所有优惠卷</h2><h3 id="重要的要说三次！！！"><a href="#重要的要说三次！！！" class="headerlink" title="重要的要说三次！！！"></a>重要的要说三次！！！</h3><p>方法：<br>首先进入活动页面 <a href="http://www.tmall.com/wow/act/14931/1111" target="_blank" rel="noopener">http://www.tmall.com/wow/act/14931/1111</a> 并且登录成功你的帐号！<br>随便找个地方点击鼠标右键审查元素</p>
<p><img src="https://www.veevv.com/images/posts/doubleEleven.png" alt="图片"></p>
<p>然后点击<code>console</code>, 把下面代码复制到指定位置, 最后回车.</p>
<p><img src="https://www.veevv.com/images/posts/doubleEleven2.png" alt="图片"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window, document, undefined</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> interval = <span class="number">800</span>;</span><br><span class="line">    <span class="keyword">var</span> closeDelay = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> couponLinks;</span><br><span class="line">    <span class="keyword">var</span> getCoupon = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= couponLinks.length) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"领取完毕"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"http://veevv.com/"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> coponLink = couponLinks[index];</span><br><span class="line">        coponLink.click(); index++;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"领取 第"</span> + index + <span class="string">" 张"</span>);</span><br><span class="line">        setTimeout(getCoupon, interval);</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> close = <span class="built_in">document</span>.querySelector(<span class="string">'.mui-dialog-close'</span>);</span><br><span class="line">            <span class="keyword">if</span> (close != <span class="literal">null</span>) close.click();</span><br><span class="line">        &#125;, closeDelay);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> _scrollTop = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> _scrollStep = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">    <span class="keyword">var</span> _maxScrollTop = <span class="built_in">document</span>.body.clientHeight - <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">    <span class="keyword">var</span> autoScrollDown = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        _scrollTop += _scrollStep;</span><br><span class="line">        <span class="keyword">if</span> (_scrollTop &gt; _maxScrollTop) &#123;</span><br><span class="line">            clearInterval(autoScrollDown);</span><br><span class="line">            couponLinks = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.mui-act-item-yhqbtn'</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"总共："</span> + couponLinks.length + <span class="string">"条张优惠券待领取..."</span>);</span><br><span class="line">            getCoupon();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">document</span>.body.scrollTop = _scrollTop;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;) (<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<p>执行完毕后的效果是这样滴.</p>
<p><img src="https://www.veevv.com/images/posts/doubleEleven3.png" alt="图片"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/杂七杂八/">杂七杂八</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/双十一/">双十一</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/双十一优惠券/">双十一优惠券</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/双十一优惠卷/">双十一优惠卷</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-mybatis-mapper-xml-reloader" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/30/mybatis-mapper-xml-reloader/" class="article-date">
      <time datetime="2015-09-29T16:00:00.000Z" itemprop="datePublished">2015-09-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/30/mybatis-mapper-xml-reloader/">Mybatis Mapper配置XML文件热加载实现</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>日常开发中数据持久层, 我大多选用<code>mybatis</code>, 轻量化和可控性高, sql掌握在自己手里, 感觉踏实一些.<br>但是从ibatis到mybatis以来, 一直有个十分困扰我的问题, 就是mapperXML文件的热加载问题, 相信这也同样困扰着不少同行们.</p>
<p>这几天实在忍无可忍, 于是在网上搜索了一番, 找了找思路, 结合网上的几个例子改了一个工具类出来, 可解决热加载问题.<br>实际测试有效, 终于可以摆脱改下SQL必须重启的命运了.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.ibatis.builder.xml.XMLMapperBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextAware;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.support.PathMatchingResourcePatternResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XMLMapperReloader</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;String, Long&gt; fileMapping = <span class="keyword">new</span> HashMap&lt;String, Long&gt;();</span><br><span class="line">    <span class="keyword">private</span> Scanner scanner = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> String packageSearchPath;</span><br><span class="line">    <span class="keyword">private</span> ScheduledExecutorService service = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.context = (ConfigurableApplicationContext) applicationContext;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">XMLMapperReloader</span><span class="params">()</span></span>&#123;</span><br><span class="line">        service = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">        service.scheduleAtFixedRate(<span class="keyword">new</span> Task(), <span class="number">5</span>, <span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                scanner = <span class="keyword">new</span> Scanner();</span><br><span class="line">                scanner.refreshMapper();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(&#123; <span class="string">"rawtypes"</span> &#125;)</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Scanner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Resource[] mapperLocations;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refreshMapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                SqlSessionFactory factory = context.getBean(SqlSessionFactory.class);</span><br><span class="line">                Configuration configuration = factory.getConfiguration();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// step.1 扫描文件</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.scanMapperXml();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// step.2 判断是否有文件发生了变化</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.isChanged()) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"==============检测到mapper有改变, 开始刷新...==============="</span>);</span><br><span class="line">                    <span class="comment">// step.2.1 清理</span></span><br><span class="line">                    <span class="keyword">this</span>.removeConfig(configuration);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// step.2.2 重新加载</span></span><br><span class="line">                    <span class="keyword">for</span> (Resource configLocation : mapperLocations) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            XMLMapperBuilder xmlMapperBuilder = <span class="keyword">new</span> XMLMapperBuilder(configLocation.getInputStream(), configuration, configLocation.toString(), configuration.getSqlFragments());</span><br><span class="line">                            xmlMapperBuilder.parse();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">"==============mapper刷新完毕==============="</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">scanMapperXml</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.mapperLocations = <span class="keyword">new</span> PathMatchingResourcePatternResolver().getResources(packageSearchPath);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">removeConfig</span><span class="params">(Configuration configuration)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Class&lt;?&gt; classConfig = configuration.getClass();</span><br><span class="line">            clearMap(classConfig, configuration, <span class="string">"mappedStatements"</span>);</span><br><span class="line">            clearMap(classConfig, configuration, <span class="string">"caches"</span>);</span><br><span class="line">            clearMap(classConfig, configuration, <span class="string">"resultMaps"</span>);</span><br><span class="line">            clearMap(classConfig, configuration, <span class="string">"parameterMaps"</span>);</span><br><span class="line">            clearMap(classConfig, configuration, <span class="string">"keyGenerators"</span>);</span><br><span class="line">            clearMap(classConfig, configuration, <span class="string">"sqlFragments"</span>);</span><br><span class="line"></span><br><span class="line">            clearSet(classConfig, configuration, <span class="string">"loadedResources"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">clearMap</span><span class="params">(Class&lt;?&gt; classConfig, Configuration configuration, String fieldName)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Field field = classConfig.getDeclaredField(fieldName);</span><br><span class="line">            field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">            Map mapConfig = (Map) field.get(configuration);</span><br><span class="line">            mapConfig.clear();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">clearSet</span><span class="params">(Class&lt;?&gt; classConfig, Configuration configuration, String fieldName)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            Field field = classConfig.getDeclaredField(fieldName);</span><br><span class="line">            field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">            Set setConfig = (Set) field.get(configuration);</span><br><span class="line">            setConfig.clear();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isChanged</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (Resource resource : mapperLocations) &#123;</span><br><span class="line">                String resourceName = resource.getFilename();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">boolean</span> addFlag = !fileMapping.containsKey(resourceName);<span class="comment">// 此为新增标识</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 修改文件:判断文件内容是否有变化</span></span><br><span class="line">                Long compareFrame = fileMapping.get(resourceName);</span><br><span class="line">                <span class="keyword">long</span> lastFrame = resource.contentLength() + resource.lastModified();</span><br><span class="line">                <span class="keyword">boolean</span> modifyFlag = <span class="keyword">null</span> != compareFrame &amp;&amp; compareFrame.longValue() != lastFrame;<span class="comment">// 此为修改标识</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 新增或是修改时,存储文件</span></span><br><span class="line">                <span class="keyword">if</span>(addFlag || modifyFlag) &#123;</span><br><span class="line">                    fileMapping.put(resourceName, Long.valueOf(lastFrame));<span class="comment">// 文件内容帧值</span></span><br><span class="line">                    flag = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> flag;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPackageSearchPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> packageSearchPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPackageSearchPath</span><span class="params">(String packageSearchPath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.packageSearchPath = packageSearchPath;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个工具类加入项目后, 还需要配置一个bean.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"XMLMapperReloader"</span> <span class="attr">class</span>=<span class="string">"com.xx.xx.dao.XMLMapperReloader"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"packageSearchPath"</span> <span class="attr">value</span>=<span class="string">"classpath:com/xx/xx/dao/*/*.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意 <code>packageSearchPath</code> 这个属性的值和<code>mybatis</code>的<code>sqlSessionFactory</code>的<code>mapperLocations</code>配置一样.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:com/xx/xx/dao/*/*.xml"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/咖啡人生/">咖啡人生</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mapper-热加载/">mapper 热加载</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis-热加载/">mybatis 热加载</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-j2ee-faq" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/23/j2ee-faq/" class="article-date">
      <time datetime="2015-09-22T16:00:00.000Z" itemprop="datePublished">2015-09-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/23/j2ee-faq/">java常见问题集合</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ul>
<li><a href="http://veevv.com/blog/posts/spring-mvc-ajax-json-406/">Spring MVC 使用ajax请求json数据时出现406 Not Acceptable</a></li>
<li><a href="http://veevv.com/blog/posts/mybatis-mapper-xml-reloader/">Mybatis Mapper配置XML文件热加载实现</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/咖啡人生/">咖啡人生</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/j2ee/">j2ee</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/j2ee-faq/">j2ee faq</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-spring-mvc-ajax-json-406" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/23/spring-mvc-ajax-json-406/" class="article-date">
      <time datetime="2015-09-22T16:00:00.000Z" itemprop="datePublished">2015-09-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/23/spring-mvc-ajax-json-406/">Spring MVC 使用ajax请求json数据时出现406 Not Acceptable</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>今天又遇到一个之前解决过的问题, 但是没有记录而忘记了, 又坑了自己俩小时. 实在该打.<br>赶紧记下来.<br><code>Spring mvc json请求时返回406错误</code></p>
<h2 id="错误原因有以下几种"><a href="#错误原因有以下几种" class="headerlink" title="错误原因有以下几种"></a>错误原因有以下几种</h2><ul>
<li>忘记加<code>@ResponseBody</code>注解</li>
<li>没有引入json相关实现包, jackson、fastjson等.</li>
<li>jackson、fastjson和Spring mvc整合方式不一样, 方式错误.</li>
</ul>
<p>如果是fastjson必须在mvc配置文件中增加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"messageConverters"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>另外必须去掉<code>&lt;mvc:annotation-driven /&gt;</code> 上述配置用于取代此配置. 此方法用于3.0.X的Spring版本.</p>
<h1 id="千万注意-不能使用上述方法"><a href="#千万注意-不能使用上述方法" class="headerlink" title="千万注意 不能使用上述方法!"></a>千万注意 不能使用上述方法!</h1><p>使用此方法直接初始化<code>AnnotationMethodHandlerAdapter</code>, 会导致<code>webBindingInitializer</code>等属性为空, 从而未来可能引发很多不可预知的问题.<br>例如<code>webBindingInitializer</code>为空, 就会导致<code>conversionService</code>为空, 从而导致页面传值时转换失效, 比如String to Date报错.<br>即使加了<code>@DateTimeFormat</code>注解也无效.</p>
<p>如果Spring版本为3.1及以上版本, 则可以用一下方式解决.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span> <span class="attr">value</span>=<span class="string">"text/html;charset=UTF-8"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"features"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>WriteMapNullValue<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>WriteNullStringAsEmpty<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这两种方式只能任选一种, 不可同时存在, 此方法因为要用到<code>mvc:message-converters</code>这个命名空间, 只有3.1以上版本才支持,<br>故而不能用于3.0.x的Spring版本.</p>
<h1 id="综上所述-如果想要使用fastjson-目前看来必须升级到Spring3-1-x以上版本"><a href="#综上所述-如果想要使用fastjson-目前看来必须升级到Spring3-1-x以上版本" class="headerlink" title="综上所述, 如果想要使用fastjson, 目前看来必须升级到Spring3.1.x以上版本."></a>综上所述, 如果想要使用fastjson, 目前看来必须升级到Spring3.1.x以上版本.</h1>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/咖啡人生/">咖啡人生</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/406-Not-Acceptable/">406 Not Acceptable</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringMVC-406/">SpringMVC 406</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring-mvc-json-406/">spring mvc json 406</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-tomcat-linux-auto-start" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/27/tomcat-linux-auto-start/" class="article-date">
      <time datetime="2015-07-26T16:00:00.000Z" itemprop="datePublished">2015-07-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/27/tomcat-linux-auto-start/">linux中设置tomcat开机启动</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>编写以下脚本放入<code>/etc/init.d/</code>目录.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tomcat自启动脚本</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># chkconfig: 345 99 10</span></span><br><span class="line"><span class="comment"># description: Auto-starts tomcat</span></span><br><span class="line"><span class="comment"># /etc/init.d/tomcatd</span></span><br><span class="line"><span class="comment"># Tomcat auto-start</span></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line"><span class="comment">#. /etc/init.d/functions</span></span><br><span class="line"><span class="comment"># source networking configuration.</span></span><br><span class="line"><span class="comment">#. /etc/sysconfig/network</span></span><br><span class="line">RETVAL=0</span><br><span class="line"><span class="built_in">export</span> JDK_HOME=Your JDK Path</span><br><span class="line"><span class="built_in">export</span> CATALINA_HOME=Your Tomcat Path</span><br><span class="line"><span class="built_in">export</span> CATALINA_BASE=Your Tomcat Path</span><br><span class="line">start()</span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">if</span> [ -f <span class="variable">$CATALINA_HOME</span>/bin/startup.sh ];</span><br><span class="line">          <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> $<span class="string">"Starting Tomcat"</span></span><br><span class="line">                <span class="variable">$CATALINA_HOME</span>/bin/startup.sh</span><br><span class="line">            RETVAL=$?</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">" OK"</span></span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">stop()</span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">if</span> [ -f <span class="variable">$CATALINA_HOME</span>/bin/shutdown.sh ];</span><br><span class="line">          <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> $<span class="string">"Stopping Tomcat"</span></span><br><span class="line">                <span class="variable">$CATALINA_HOME</span>/bin/shutdown.sh</span><br><span class="line">            RETVAL=$?</span><br><span class="line">            sleep 1</span><br><span class="line">            ps -fwwu tomcat | grep apache-tomcat|grep -v grep | grep -v PID | awk <span class="string">'&#123;print $2&#125;'</span>|xargs <span class="built_in">kill</span> -9</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">" OK"</span></span><br><span class="line">            <span class="comment"># [ $RETVAL -eq 0 ] &amp;&amp; rm -f /var/lock/...</span></span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line"> start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line"> stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line"> restart)</span><br><span class="line">         <span class="built_in">echo</span> $<span class="string">"Restaring Tomcat"</span></span><br><span class="line">         <span class="variable">$0</span> stop</span><br><span class="line">         sleep 1</span><br><span class="line">         <span class="variable">$0</span> start</span><br><span class="line">         ;;</span><br><span class="line"> *)</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|restart&#125;"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">        ;;</span><br><span class="line">esacP</span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$RETVAL</span></span><br></pre></td></tr></table></figure>
<p>完成后增加可执行权限:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/init.d/tomcat</span><br></pre></td></tr></table></figure>
<p>再创建软连接到<code>/etc/rc3.d/</code>目录, <code>rc3.d</code>中的3表示开机启动级别, 3表示命令行模式启动.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /etc/init.d/tomcat /etc/rc3.d/S98tomcat</span><br></pre></td></tr></table></figure>
<p>软连接名称<code>S98tomcat</code>中的S98表示启动顺序排在98号, 通过名称可控制服务启动顺序, 以保证一些有特定启动顺序的服务能正常启动.</p>
<p>最后将tomcat注册为服务, <code>chkconfig --add tomcat</code>. 搞定收工.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/杂七杂八/">杂七杂八</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开启启动/">开启启动</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自动启动/">自动启动</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-common-code-memo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/14/common-code-memo/" class="article-date">
      <time datetime="2015-07-13T16:00:00.000Z" itemprop="datePublished">2015-07-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/14/common-code-memo/">常用语句备忘</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>远程访问授权</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> root@<span class="string">'IP'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'pwd'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure>
<p><iframe height="50" width="100%" src="http://pv.sohu.com/cityjson?ie=utf-8"></iframe></p>
<h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><p>删除json元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> json[index];</span><br></pre></td></tr></table></figure>
<p>jquery选中checkBox</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(checkBox).prop(<span class="string">"checked"</span>, <span class="literal">true</span>);</span><br><span class="line">$(checkBox).prop(<span class="string">"checked"</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>jquery判断checkBox选中状态</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(checkBox).is(<span class="string">":checked"</span>);</span><br><span class="line">$(checkBox).is(<span class="string">":checked"</span>);</span><br></pre></td></tr></table></figure>
<p>jquery each遍历的continue和break</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.each(array, <span class="function"><span class="keyword">function</span>(<span class="params">[key]</span>)</span>&#123;</span><br><span class="line">    key <span class="comment">// 如果循环的是json对象的话, key就是json的key, 如果是数组的话, 则为下标index.</span></span><br><span class="line">    <span class="keyword">this</span> <span class="comment">// array里当前遍历到的元素</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// continue;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// break;</span></span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="string">"xxx"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span> <span class="comment">// 当前遍历到的dom元素, 需要转化为jquery对象的话, 应使用$(this)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// continue;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// break;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>当function作为变量被引用时, 想要调用的话直接<code>变量名()</code>即可, 使用<code>eval</code>函数执行无效.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//do Something&#125;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//fn == doSomething</span></span><br><span class="line">    fn();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="linux-centos"><a href="#linux-centos" class="headerlink" title="linux/centos"></a>linux/centos</h2><p>mysql启动失败, apache启动找不到tomcat文件夹等奇怪问题,皆有可能是selinux导致的问题.关闭即可解决.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#临时关闭selinux</span></span><br><span class="line">/usr/sbin/setenforce 0</span><br><span class="line"><span class="comment">#临时开启selinux</span></span><br><span class="line">/usr/sbin/setenforce 1</span><br><span class="line"><span class="comment">#永久关闭selinux</span></span><br><span class="line">vim /etc/sysconfig/selinux</span><br><span class="line">SELINUX=<span class="built_in">disable</span></span><br></pre></td></tr></table></figure>
<p>防火墙允许80端口通过, 解决apache无法访问的问题.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">/etc/rc.d/init.d/iptables save</span><br></pre></td></tr></table></figure>
<p>linux下mysql自动备份.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">id=<span class="string">"root"</span> <span class="comment">#用户名</span></span><br><span class="line"><span class="built_in">pwd</span>=<span class="string">"pwd"</span> <span class="comment">#密码</span></span><br><span class="line">dbs=<span class="string">"db1 db2"</span> <span class="comment">#数据库名字的列表，多个数据库用空格分开。</span></span><br><span class="line">backuppath=<span class="string">"/your path"</span> <span class="comment">#保存备份的位置</span></span><br><span class="line">day=5   <span class="comment">#保留最近几天的备份</span></span><br><span class="line">[ ! -d <span class="variable">$backpath</span> ] &amp;&amp;mkdir -p <span class="variable">$backuppath</span>  <span class="comment">#判断备份目录是否存在，不存时新建目录。</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$backuppath</span>   <span class="comment">#转到备份目录，这句话可以省略。可以直接将路径到命令的也行。</span></span><br><span class="line">backupname=mysql_$(date +%Y-%m-%d)  <span class="comment">#生成备份文件的名字的前缀，不带后缀。</span></span><br><span class="line"><span class="keyword">for</span> db <span class="keyword">in</span> <span class="variable">$dbs</span>;   <span class="comment">#dbs是一个数据名字的集合。遍历所有的数据。</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   mysqldump -u<span class="variable">$id</span> -p<span class="variable">$pwd</span> <span class="variable">$db</span> &gt; <span class="variable">$backupname_</span><span class="variable">$db</span>.sql  <span class="comment">#备份单个数据为.sql文件。放到当前位置</span></span><br><span class="line">   <span class="keyword">if</span> [ <span class="string">"$?"</span> == <span class="string">"0"</span> ]  <span class="comment">#$? 得到上一个shell命令的执行的返回值。0表示执行成功。其他表示错误。并将将结果写入到日志中。</span></span><br><span class="line">   <span class="keyword">then</span></span><br><span class="line">       <span class="built_in">echo</span> $(date +%Y-%m-%d)<span class="string">" <span class="variable">$db</span>  mysqldump sucess"</span>&gt;&gt;mysql.log</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> $(date +%Y-%m-%d)<span class="string">"  <span class="variable">$db</span> mysql dump failed"</span>&gt;&gt;mysql.log</span><br><span class="line">      <span class="built_in">exit</span> 0</span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">tar -czf <span class="variable">$backupname</span>.tar.gz *.sql <span class="comment">#压缩所有sql文件</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$?"</span> == <span class="string">"0"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> $(date +%Y-%m-%d)<span class="string">" tar sucess"</span>&gt;&gt;mysql.log</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> $(date +%Y-%m-%d)<span class="string">" tar failed"</span>&gt;&gt;mysql.log</span><br><span class="line">   <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">rm -f *.sql  <span class="comment">#删除所有的sql文件</span></span><br><span class="line">delname=mysql_$(date -d <span class="string">"<span class="variable">$day</span> day ago"</span> +%Y-%m-%d).tar.gz  <span class="comment">#得到要删除的太旧的备份的名字。</span></span><br><span class="line">rm -f <span class="variable">$delname</span>  <span class="comment">#删除文件</span></span><br></pre></td></tr></table></figure>
<p>将以上脚本保存到自定义目录.<br>脚本写好后, <code>vim /etc/crontab</code>, 加入一句配置<code>29 03 * * * root /home/mysql/autobak/autobak.sh</code><br>含义是每天凌晨4点30分执行一次autobak脚本.</p>
<p>如若当前系统未安装crontab, 执行以下语句.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install vixie-cron</span><br><span class="line">yum install crontabs</span><br></pre></td></tr></table></figure>
<p>查看tlp进程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ntlp</span><br></pre></td></tr></table></figure>
<p>启动svn</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r /home/svn/repo/ --svn目的地址</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/杂七杂八/">杂七杂八</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jquery/">jquery</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql启动失败/">mysql启动失败</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql自动备份/">mysql自动备份</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/selinux/">selinux</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-touch.js-baidu-code" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/10/touch.js-baidu-code/" class="article-date">
      <time datetime="2015-07-09T16:00:00.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/10/touch.js-baidu-code/">touch.js 百度开源项目.</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="touch-js"><a href="#touch-js" class="headerlink" title="touch.js"></a>touch.js</h2><p>在开发移动端的应用中会使用到很多的手势操作，例如一指拖动、两指旋转等等，为了方便开放者快速集成这些手势，在Clouda中内置了事件和手势库Library.touch，下面将详细的介绍如何使用Library.touch。</p>
<p>手势事件处理类API目前支持以下功能：</p>
<ul>
<li>事件配置</li>
<li>事件代理</li>
<li>事件绑定</li>
<li>解除事件代理</li>
<li>解除事件绑定</li>
<li>触发事件</li>
</ul>
<h2 id="事件配置"><a href="#事件配置" class="headerlink" title="事件配置"></a>事件配置</h2><p><code>touch.config(config)</code> <em>!!注意!!</em> 这里官方文档坑爹</p>
<p>使用后发现浏览器控制台报错, <code>touch.config is not a function</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">    tap: <span class="literal">true</span>,</span><br><span class="line">    doubleTap: <span class="literal">true</span>,</span><br><span class="line">    tapMaxDistance: <span class="number">10</span>,</span><br><span class="line">    hold: <span class="literal">true</span>,</span><br><span class="line">    tapTime: <span class="number">200</span>,</span><br><span class="line">    holdTime: <span class="number">650</span>,</span><br><span class="line">    maxDoubleTapInterval: <span class="number">300</span>,</span><br><span class="line">    swipe: <span class="literal">true</span>,</span><br><span class="line">    swipeTime: <span class="number">300</span>,</span><br><span class="line">    swipeMinDistance: <span class="number">18</span>,</span><br><span class="line">    swipeFactor: <span class="number">5</span>,</span><br><span class="line">    drag: <span class="literal">true</span>,</span><br><span class="line">    pinch: <span class="literal">true</span>,</span><br><span class="line">    minScaleRate: <span class="number">0</span>,</span><br><span class="line">    minRotationAngle: <span class="number">0</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>查阅源码得知, 压根儿不存在config这个function.<br>假设我这里需要设置关闭doubleTap事件, 写法应该为:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch.config.doubleTap = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<p>如果要批量配置的话:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">touch.config = &#123;</span><br><span class="line">    tap: <span class="literal">true</span>,</span><br><span class="line">    doubleTap: <span class="literal">true</span>,</span><br><span class="line">    tapMaxDistance: <span class="number">10</span>,</span><br><span class="line">    hold: <span class="literal">true</span>,</span><br><span class="line">    tapTime: <span class="number">200</span>,</span><br><span class="line">    holdTime: <span class="number">650</span>,</span><br></pre></td></tr></table></figure>
<p>}<br><code>`</code></p>
<p>详细文档 详见<a href="http://touch.code.baidu.com/" target="_blank" rel="noopener">touch.js</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/杂七杂八/">杂七杂八</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/touch/">touch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/touch-js/">touch.js</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-bootstrap-css" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/26/bootstrap-css/" class="article-date">
      <time datetime="2015-06-25T16:00:00.000Z" itemprop="datePublished">2015-06-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/26/bootstrap-css/">bootstrap栅格布局样式备忘.</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="HTML5-文档类型"><a href="#HTML5-文档类型" class="headerlink" title="HTML5 文档类型"></a>HTML5 文档类型</h2><p>Bootstrap 使用到的某些 HTML 元素和 CSS 属性需要将页面设置为 HTML5 文档类型。在你项目中的每个页面都要参照下面的格式进行设置。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="移动设备优先"><a href="#移动设备优先" class="headerlink" title="移动设备优先"></a>移动设备优先</h2><p>在 Bootstrap 2 中，我们对框架中的某些关键部分增加了对移动设备友好的样式。而在 Bootstrap 3 中，我们重写了整个框架，使其一开始就是对移动设备友好的。这次不是简单的增加一些可选的针对移动设备的样式，而是直接融合进了框架的内核中。也就是说，<strong>Bootstrap 是移动设备优先的</strong>。针对移动设备的样式融合进了框架的每个角落，而不是增加一个额外的文件。</p>
<p>为了确保适当的绘制和触屏缩放，需要在 <code>&lt;head&gt;</code> 之中<strong>添加 viewport 元数据标签</strong>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在移动设备浏览器上，通过为视口（viewport）设置 meta 属性为 <code>user-scalable=no</code> 可以禁用其缩放（zooming）功能。这样禁用缩放功能后，用户只能滚动屏幕，就能让你的网站看上去更像原生应用的感觉。注意，这种方式我们并不推荐所有网站使用，还是要看你自己的情况而定！</p>
<h2 id="排版与链接"><a href="#排版与链接" class="headerlink" title="排版与链接"></a>排版与链接</h2><p>Bootstrap 排版、链接样式设置了基本的全局样式。分别是：</p>
<ul>
<li>为 <code>body</code> 元素设置 <code>background-color: #fff</code>;</li>
<li>使用 <code>@font-family-base</code>、<code>@font-size-base</code> 和 <code>@line-height-base</code> a变量作为排版的基本参数</li>
<li>为所有链接设置了基本颜色 <code>@link-color</code> ，并且当链接处于 <code>:hover</code> 状态时才添加下划线</li>
</ul>
<p>这些样式都能在 <code>scaffolding.less</code> 文件中找到对应的源码。</p>
<h2 id="Normalize-css"><a href="#Normalize-css" class="headerlink" title="Normalize.css"></a>Normalize.css</h2><p>为了增强跨浏览器表现的一致性，我们使用了 <a href="http://necolas.github.io/normalize.css/" target="_blank" rel="noopener">Normalize.css</a>，这是由 <a href="https://twitter.com/necolas" target="_blank" rel="noopener">Nicolas Gallagher</a> 和 <a href="https://twitter.com/jon_neal" target="_blank" rel="noopener">Jonathan Neal</a> 维护的一个CSS 重置样式库。</p>
<h2 id="布局容器"><a href="#布局容器" class="headerlink" title="布局容器"></a>布局容器</h2><p>Bootstrap 需要为页面内容和栅格系统包裹一个 <code>.container</code> 容器。我们提供了两个作此用处的类。注意，由于 <code>padding</code> 等属性的原因，这两种 容器类不能互相嵌套。</p>
<p><code>.container</code> 类用于固定宽度并支持响应式布局的容器。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>.container-fluid</code> 类用于 100% 宽度，占据全部视口（viewport）的容器。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h1><p>Bootstrap 提供了一套响应式、移动设备优先的流式栅格系统，随着屏幕或视口（viewport）尺寸的增加，系统会自动分为最多12列。它包含了易于使用的预定义类，还有强大的mixin 用于生成更具语义的布局。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>栅格系统用于通过一系列的行（row）与列（column）的组合来创建页面布局，你的内容就可以放入这些创建好的布局中。下面就介绍一下 Bootstrap 栅格系统的工作原理：</p>
<ul>
<li>“行（row）”必须包含在 <code>.container</code> （固定宽度）或 <code>.container-fluid</code> （100% 宽度）中，以便为其赋予合适的排列（aligment）和内补（padding）。</li>
<li>通过“行（row）”在水平方向创建一组“列（column）”。</li>
<li>你的内容应当放置于“列（column）”内，并且，只有“列（column）”可以作为行（row）”的直接子元素。</li>
<li>类似 <code>.row</code> 和 <code>.col-xs-4</code> 这种预定义的类，可以用来快速创建栅格布局。Bootstrap 源码中定义的 mixin 也可以用来创建语义化的布局。</li>
<li>通过为“列（column）”设置 <code>padding</code> 属性，从而创建列与列之间的间隔（gutter）。通过为 <code>.row</code> 元素设置负值 <code>margin</code> 从而抵消掉为 <code>.container</code> 元素设置的 <code>padding</code>，也就间接为“行（row）”所包含的“列（column）”抵消掉了<code>padding</code>。</li>
<li>负值的 margin就是下面的示例为什么是向外突出的原因。在栅格列中的内容排成一行。</li>
<li>栅格系统中的列是通过指定1到12的值来表示其跨越的范围。例如，三个等宽的列可以使用三个 <code>.col-xs-4</code> 来创建。</li>
<li>如果一“行（row）”中包含了的“列（column）”大于 12，多余的“列（column）”所在的元素将被作为一个整体另起一行排列。</li>
<li>栅格类适用于与屏幕宽度大于或等于分界点大小的设备 ， 并且针对小屏幕设备覆盖栅格类。 因此，在元素上应用任何 <code>.col-md-*</code> 栅格类适用于与屏幕宽度大于或等于分界点大小的设备 ， 并且针对小屏幕设备覆盖栅格类。 因此，在元素上应用任何 <code>.col-lg-*</code> 不存在， 也影响大屏幕设备。</li>
</ul>
<p>通过研究后面的实例，可以将这些原理应用到你的代码中。</p>
<h2 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h2><p>在栅格系统中，我们在 Less 文件中使用以下媒体查询（media query）来创建关键的分界点阈值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 超小屏幕（手机，小于 768px） */</span></span><br><span class="line"><span class="comment">/* 没有任何媒体查询相关的代码，因为这在 Bootstrap 中是默认的（还记得 Bootstrap 是移动设备优先的吗？） */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小屏幕（平板，大于等于 768px） */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: @screen-sm-min) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 中等屏幕（桌面显示器，大于等于 992px） */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: @screen-md-min) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 大屏幕（大桌面显示器，大于等于 1200px） */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: @screen-lg-min) &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<p>我们偶尔也会在媒体查询代码中包含 <code>max-width</code> 从而将 CSS 的影响限制在更小范围的屏幕大小之内。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> (max-width: @screen-xs-max) &#123; ... &#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: @screen-sm-min) and (max-width: @screen-sm-max) &#123; ... &#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: @screen-md-min) and (max-width: @screen-md-max) &#123; ... &#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: @screen-lg-min) &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<h2 id="栅格参数"><a href="#栅格参数" class="headerlink" title="栅格参数"></a>栅格参数</h2><p>通过下表可以详细查看 Bootstrap 的栅格系统是如何在多种屏幕设备上工作的。<br><img src="https://veevv.com/images/posts/bootstrap.png" alt="图片"></p>
<h2 id="实例：从堆叠到水平排列"><a href="#实例：从堆叠到水平排列" class="headerlink" title="实例：从堆叠到水平排列"></a>实例：从堆叠到水平排列</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-1"</span>&gt;</span>.col-md-1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-8"</span>&gt;</span>.col-md-8<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4"</span>&gt;</span>.col-md-4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4"</span>&gt;</span>.col-md-4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4"</span>&gt;</span>.col-md-4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4"</span>&gt;</span>.col-md-4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span>.col-md-6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span>.col-md-6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://veevv.com/images/posts/bootstrap2.png" alt="图片"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/bootstrap/">bootstrap</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bootstrap/">bootstrap</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/col-xl/">col-xl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/布局/">布局</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/栅格/">栅格</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-my-first-blog" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/24/my-first-blog/" class="article-date">
      <time datetime="2015-06-23T16:00:00.000Z" itemprop="datePublished">2015-06-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/24/my-first-blog/">我历经百般磨难, 命运各种坎坷的第一篇博文.</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>第七年了, 我居然连个博客都没有, 说来也是好笑. 我是一个实实在在的实用主义者, 做程序猿到今时今日仍然没有买过任何一本软件相关书籍, 相当厌恶那些教材中冗长枯燥的字句, 更愿意直接上手Junit调试, DEBUG追进源码里去看. 搞不懂的记不到的, 也都用找度娘谷哥搞定. 可悲的却是有的东西花上几个小时才从网上找到解决方案, 却不知也没有地方保存, 以至于再次遇到时, 又花上数小时寻找, 还不一定能再次找到. 好不容易终于萌发了弄个个人博客的想法, csdn/iteye等技术blog也都去转了转, 却都不甚喜欢, 在这个私人定制的时代, 这些博客却依旧有着诸多限制. 于是又想自己搞个服务器, 自己弄个开源博客什么的, 服务器租用问题, 流量问题, 恶心的CMS问题, 维护问题, 各种问题一大堆, 让我这个一工作完就瘫痪的人只能望而却步, 最终这个想法也是彻底夭折…</p>
<p>前些年, 一个叫<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>的社区出现在我面前, 庞大的开源资源和新鲜的版本管理方式, 让我爱不释手. 让我这个实实在在的实用主义者到了做任何东西, 都必然先上<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>搜上一把的地步, 找到合适或相对合适的, 直接拿下用或者拿来改, 极大提升了开发的效率, 也进一步阅读了更多的优秀的源码. 随着<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>使用的深入, 竟然发现它居然可以建立和托管个人博客, 而且我所有烦躁的问题全部都没有了:</p>
<ul>
<li>我真的不想维护数据库</li>
<li>我真的只想生成静态的html</li>
<li>我真的很讨厌什么CMS</li>
<li>我真的不喜欢富文本编辑器</li>
<li>我真的希望一切的一切都可以没有限制, 自由自在.</li>
</ul>
<p>真的, 我想要把弄博客变成一件很有趣的事.</p>
<p>最终, 在<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>, 我得到了我想要的一切, 感谢<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>, 感谢全天下支撑着<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>的一只只可爱的程序猿们.</p>
<p><img src="https://www.veevv.com/images/posts/firstBlog.png" alt="图片"></p>
<p>现在, 我可以开始我的博客之旅了, 开始积累开始沉淀, 帮助自己的同时, 如果也能偶尔帮助到别人, 那就是大团圆结局啦. 目前先开设三个分类:</p>
<ul>
<li><a href="http://www.veevv.com/blog/magazine/" target="_blank" rel="noopener">杂七杂八</a> - 一些零零碎碎的东西</li>
<li><a href="http://www.veevv.com/blog/activiti/" target="_blank" rel="noopener">activiti</a> - java开源工作流的东西</li>
<li><a href="http://www.veevv.com/blog/javalife/" target="_blank" rel="noopener">咖啡人生</a> - java老本行, 一些经验或者备忘的东西.</li>
</ul>
<p>最后再次感觉这个云时代, 感谢所有为之开源世界贡献者或贡献过的人们. 让我们一起, 让开源世界更加精彩.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/吐槽/">吐槽</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2019 Victor Jones
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit">本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//lib.baomitu.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://busuanzi.ibruce.info//busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>